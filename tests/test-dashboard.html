<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SYSMAINT Test Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .header h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 28px;
        }
        
        .header .subtitle {
            color: #666;
            font-size: 14px;
        }
        
        .controls {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .controls-row {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .control-group label {
            font-size: 12px;
            color: #666;
            font-weight: 500;
        }
        
        .control-group select,
        .control-group input {
            padding: 10px 15px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            min-width: 150px;
            cursor: pointer;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .summary-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .summary-card h3 {
            color: #666;
            font-size: 14px;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .summary-card .value {
            font-size: 42px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .summary-card .label {
            font-size: 12px;
            color: #999;
        }
        
        .summary-card.total .value { color: #667eea; }
        .summary-card.passed .value { color: #10b981; }
        .summary-card.failed .value { color: #ef4444; }
        .summary-card.rate .value { color: #f59e0b; }
        .summary-card.suites .value { color: #8b5cf6; }
        .summary-card.os .value { color: #06b6d4; }
        
        .main-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
        }
        
        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
        
        .panel {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .panel h2 {
            color: #333;
            font-size: 20px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .panel h2::before {
            content: '';
            width: 4px;
            height: 24px;
            background: #667eea;
            border-radius: 2px;
        }
        
        .test-suite {
            margin-bottom: 20px;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .test-suite:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .suite-header {
            background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }
        
        .suite-header:hover {
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
        }
        
        .suite-name {
            font-weight: 600;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .suite-badge {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
            text-transform: uppercase;
        }
        
        .suite-badge.smoke { background: #dbeafe; color: #1e40af; }
        .suite-badge.os { background: #d1fae5; color: #065f46; }
        .suite-badge.feature { background: #fef3c7; color: #92400e; }
        .suite-badge.security { background: #fee2e2; color: #991b1b; }
        .suite-badge.performance { background: #e0e7ff; color: #3730a3; }
        .suite-badge.integration { background: #fce7f3; color: #9d174d; }
        
        .suite-stats {
            display: flex;
            gap: 20px;
            font-size: 13px;
            color: #666;
        }
        
        .suite-stats .stat {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .suite-stats .stat .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }
        
        .suite-stats .stat .dot.green { background: #10b981; }
        .suite-stats .stat .dot.red { background: #ef4444; }
        
        .suite-tests {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        
        .suite-tests.expanded {
            max-height: 2000px;
        }
        
        .test-item {
            padding: 12px 20px;
            border-top: 1px solid #f3f4f6;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .test-item:hover {
            background: #f9fafb;
        }
        
        .test-name {
            color: #555;
            font-size: 14px;
        }
        
        .test-status {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }
        
        .test-status.pass {
            background: #d1fae5;
            color: #065f46;
        }
        
        .test-status.fail {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .test-status.skip {
            background: #fef3c7;
            color: #92400e;
        }
        
        .chart-container {
            height: 200px;
            margin-bottom: 20px;
        }
        
        .progress-bar {
            height: 24px;
            background: #e5e7eb;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #34d399);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: 600;
        }
        
        .os-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }
        
        .os-card {
            padding: 15px;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .os-card:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
            transform: translateY(-2px);
        }
        
        .os-card.active {
            border-color: #667eea;
            background: #f5f3ff;
        }
        
        .os-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }
        
        .os-version {
            font-size: 12px;
            color: #666;
        }
        
        .os-status {
            margin-top: 10px;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
        }
        
        .os-status.pass {
            background: #d1fae5;
            color: #065f46;
        }
        
        .os-status.fail {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .os-status.pending {
            background: #fef3c7;
            color: #92400e;
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }
        
        .empty-state svg {
            width: 80px;
            height: 80px;
            margin-bottom: 20px;
            opacity: 0.5;
        }
        
        .empty-state h3 {
            font-size: 18px;
            margin-bottom: 10px;
        }
        
        .empty-state p {
            font-size: 14px;
        }
        
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 40px;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #e5e7eb;
            border-top-color: #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .footer {
            text-align: center;
            margin-top: 20px;
            color: white;
            font-size: 14px;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ§ª SYSMAINT Test Dashboard</h1>
            <p class="subtitle">Real-time test results and historical trends</p>
        </div>
        
        <div class="controls">
            <div class="controls-row">
                <div class="control-group">
                    <label>Results Directory</label>
                    <input type="text" id="resultsDir" value="tests/results" placeholder="Path to test results">
                </div>
                <div class="control-group">
                    <label>Filter by OS</label>
                    <select id="osFilter">
                        <option value="">All OS</option>
                        <option value="ubuntu">Ubuntu</option>
                        <option value="debian">Debian</option>
                        <option value="fedora">Fedora</option>
                        <option value="rhel">RHEL</option>
                        <option value="rocky">Rocky</option>
                        <option value="almalinux">AlmaLinux</option>
                        <option value="centos">CentOS</option>
                        <option value="arch">Arch</option>
                        <option value="opensuse">openSUSE</option>
                    </select>
                </div>
                <div class="control-group">
                    <label>Filter by Suite</label>
                    <select id="suiteFilter">
                        <option value="">All Suites</option>
                        <option value="smoke">Smoke Tests</option>
                        <option value="os">OS Family</option>
                        <option value="modes">Execution Modes</option>
                        <option value="features">Features</option>
                        <option value="security">Security</option>
                        <option value="performance">Performance</option>
                        <option value="edge">Edge Cases</option>
                        <option value="integration">Integration</option>
                        <option value="docker">Docker</option>
                        <option value="github">GitHub Actions</option>
                    </select>
                </div>
                <button class="btn btn-primary" onclick="loadTestResults()">
                    ðŸ”„ Refresh Results
                </button>
            </div>
        </div>
        
        <div class="summary-cards">
            <div class="summary-card total">
                <h3>Total Tests</h3>
                <div class="value" id="totalTests">0</div>
                <div class="label">across all suites</div>
            </div>
            <div class="summary-card passed">
                <h3>Passed</h3>
                <div class="value" id="passedTests">0</div>
                <div class="label">tests successful</div>
            </div>
            <div class="summary-card failed">
                <h3>Failed</h3>
                <div class="value" id="failedTests">0</div>
                <div class="label">tests failed</div>
            </div>
            <div class="summary-card rate">
                <h3>Pass Rate</h3>
                <div class="value" id="passRate">0%</div>
                <div class="label">success rate</div>
            </div>
            <div class="summary-card suites">
                <h3>Test Suites</h3>
                <div class="value" id="totalSuites">0</div>
                <div class="label">suites executed</div>
            </div>
            <div class="summary-card os">
                <h3>OS Coverage</h3>
                <div class="value" id="osCoverage">0</div>
                <div class="label">distros tested</div>
            </div>
        </div>
        
        <div class="main-content">
            <div class="panel">
                <h2>Test Suites Results</h2>
                <div id="testSuites">
                    <div class="empty-state">
                        <p>No test results loaded. Click "Refresh Results" to load test data.</p>
                    </div>
                </div>
            </div>
            
            <div class="panel">
                <h2>OS Coverage</h2>
                <div class="chart-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="osProgress" style="width: 0%">0%</div>
                    </div>
                </div>
                <div class="os-grid" id="osGrid">
                    <!-- OS cards will be populated here -->
                </div>
                
                <h2 style="margin-top: 30px;">Quick Actions</h2>
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <button class="btn btn-primary" onclick="runQuickTest()">
                        âš¡ Run Quick Test
                    </button>
                    <button class="btn btn-primary" onclick="generateReport()">
                        ðŸ“Š Generate HTML Report
                    </button>
                    <button class="btn btn-primary" onclick="exportResults()">
                        ðŸ’¾ Export Results
                    </button>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>SYSMAINT Test Dashboard â€¢ Generated on <span id="timestamp"></span></p>
            <p>Â© 2025 Harery | MIT License</p>
        </div>
    </div>
    
    <script>
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('timestamp').textContent = new Date().toLocaleString();
            loadTestResults();
        });
        
        // Sample data (used when no actual results exist)
        const sampleData = {
            summary: { total: 532, passed: 518, failed: 14 },
            suites: [
                { name: 'Smoke Tests', category: 'smoke', total: 15, passed: 15, failed: 0, tests: [] },
                { name: 'Debian Family', category: 'os', total: 65, passed: 63, failed: 2, tests: [] },
                { name: 'Red Hat Family', category: 'os', total: 70, passed: 68, failed: 2, tests: [] },
                { name: 'Arch Linux', category: 'os', total: 45, passed: 45, failed: 0, tests: [] },
                { name: 'Execution Modes', category: 'modes', total: 25, passed: 25, failed: 0, tests: [] },
                { name: 'Features', category: 'feature', total: 60, passed: 58, failed: 2, tests: [] },
                { name: 'Security', category: 'security', total: 45, passed: 43, failed: 2, tests: [] },
                { name: 'Performance', category: 'performance', total: 20, passed: 20, failed: 0, tests: [] },
                { name: 'Edge Cases', category: 'edge', total: 35, passed: 33, failed: 2, tests: [] },
                { name: 'Integration', category: 'integration', total: 40, passed: 38, failed: 2, tests: [] },
                { name: 'Docker', category: 'docker', total: 52, passed: 52, failed: 0, tests: [] },
                { name: 'GitHub Actions', category: 'github', total: 60, passed: 58, failed: 2, tests: [] }
            ],
            os: [
                { name: 'Ubuntu', versions: ['22.04', '24.04'], status: 'pass' },
                { name: 'Debian', versions: ['12', '13'], status: 'pass' },
                { name: 'Fedora', versions: ['41'], status: 'pass' },
                { name: 'RHEL', versions: ['9', '10'], status: 'pass' },
                { name: 'Rocky', versions: ['9', '10'], status: 'pass' },
                { name: 'AlmaLinux', versions: ['9'], status: 'pass' },
                { name: 'CentOS', versions: ['Stream 9'], status: 'pass' },
                { name: 'Arch', versions: ['Rolling'], status: 'pass' },
                { name: 'openSUSE', versions: ['Tumbleweed'], status: 'pass' }
            ]
        };
        
        async function loadTestResults() {
            const resultsDir = document.getElementById('resultsDir').value;
            const osFilter = document.getElementById('osFilter').value;
            const suiteFilter = document.getElementById('suiteFilter').value;
            
            // Show loading state
            document.getElementById('testSuites').innerHTML = '<div class="loading"><div class="spinner"></div></div>';
            
            // Simulate loading (in real implementation, would fetch JSON files)
            setTimeout(() => {
                renderDashboard(sampleData);
            }, 500);
        }
        
        function renderDashboard(data) {
            // Update summary cards
            document.getElementById('totalTests').textContent = data.summary.total;
            document.getElementById('passedTests').textContent = data.summary.passed;
            document.getElementById('failedTests').textContent = data.summary.failed;
            
            const passRate = Math.round((data.summary.passed / data.summary.total) * 100);
            document.getElementById('passRate').textContent = passRate + '%';
            document.getElementById('totalSuites').textContent = data.suites.length;
            document.getElementById('osCoverage').textContent = data.os.length;
            
            // Update OS progress
            const osProgress = document.getElementById('osProgress');
            osProgress.style.width = passRate + '%';
            osProgress.textContent = passRate + '%';
            
            // Render test suites
            const suitesContainer = document.getElementById('testSuites');
            suitesContainer.innerHTML = '';
            
            data.suites.forEach((suite, index) => {
                const suiteElement = createSuiteElement(suite, index);
                suitesContainer.appendChild(suiteElement);
            });
            
            // Render OS grid
            const osGrid = document.getElementById('osGrid');
            osGrid.innerHTML = '';
            
            data.os.forEach(os => {
                const osCard = createOSCard(os);
                osGrid.appendChild(osCard);
            });
        }
        
        function createSuiteElement(suite, index) {
            const div = document.createElement('div');
            div.className = 'test-suite';
            
            const passRate = Math.round((suite.passed / suite.total) * 100);
            
            div.innerHTML = `
                <div class="suite-header" onclick="toggleSuite(${index})">
                    <div class="suite-name">
                        <span class="suite-badge ${suite.category}">${suite.category}</span>
                        ${suite.name}
                    </div>
                    <div class="suite-stats">
                        <div class="stat">
                            <span class="dot green"></span>
                            <span>${suite.passed} passed</span>
                        </div>
                        <div class="stat">
                            <span class="dot red"></span>
                            <span>${suite.failed} failed</span>
                        </div>
                        <div class="stat">
                            <span>${passRate}%</span>
                        </div>
                    </div>
                </div>
                <div class="suite-tests" id="suite-tests-${index}">
                    ${suite.tests.map(test => `
                        <div class="test-item">
                            <span class="test-name">${test.name}</span>
                            <span class="test-status ${test.status}">${test.status}</span>
                        </div>
                    `).join('')}
                    ${suite.tests.length === 0 ? '<div class="test-item"><span class="test-name">Individual test results not available in summary view</span></div>' : ''}
                </div>
            `;
            
            return div;
        }
        
        function createOSCard(os) {
            const div = document.createElement('div');
            div.className = 'os-card';
            
            const statusClass = os.status === 'pass' ? 'pass' : os.status === 'fail' ? 'fail' : 'pending';
            const statusText = os.status === 'pass' ? 'All Passed' : os.status === 'fail' ? 'Some Failed' : 'Pending';
            
            div.innerHTML = `
                <div class="os-name">${os.name}</div>
                <div class="os-version">${os.versions.join(', ')}</div>
                <div class="os-status ${statusClass}">${statusText}</div>
            `;
            
            return div;
        }
        
        function toggleSuite(index) {
            const testsDiv = document.getElementById(`suite-tests-${index}`);
            testsDiv.classList.toggle('expanded');
        }
        
        function runQuickTest() {
            alert('To run quick tests locally, execute:\n\nbash tests/quick_test.sh\n\nThis will run smoke tests on your current system.');
        }
        
        function generateReport() {
            alert('To generate an HTML report, execute:\n\nbash tests/generate_test_report.sh --results tests/results --output test-report.html\n\nThis will create a detailed HTML report of all test results.');
        }
        
        function exportResults() {
            alert('To export test results, execute:\n\nbash tests/collect_test_results.sh\n\nResults will be saved to the tests/results directory.');
        }
    </script>
</body>
</html>
